{% extends 'base.html.twig' %}

{% block title %}Sortie Patient
{% endblock %}

{% block body %}
	<h1>Sortie des patients</h1>

	{% for message in app.flashes('success') %}
		<div class="flash-success">{{ message }}</div>
	{% endfor %}

	{% if sejours is empty %}
		<p>Aucun séjour en cours.</p>
	{% else %}
		<table border="1" cellpadding="5">
			<tr>
				<th>Patient</th>
				<th>Date Début</th>
				<th>Date Fin</th>
				<th>Commentaire</th>
			</tr>
			{% for sejour in sejours %}
				<tr>
					<td>{{ sejour.patient.prenom }}
						{{ sejour.patient.nom }}</td>
					<td>{{ sejour.dateDebut|date('d/m/Y') }}</td>
					<td>{{ sejour.dateFin ? sejour.dateFin|date('d/m/Y') : 'En cours' }}</td>
					<td class="comment-cell">
						<form id="form-{{ sejour.id }}" method="post" style="display:inline;">
							<input type="hidden" name="sejour_id" value="{{ sejour.id }}">
							<textarea name="commentaire">{{ sejour.commentaire }}</textarea>
							<button type="submit" class="btn-arrival">Valider sortie</button>
						</form>
					</td>
				</tr>

			{% endfor %}
		</table>
	{% endif %}

	<a href="{{ path('app_dashboard') }}" class="btn-back-dashboard">⬅ Retour au dashboard</a>
{% endblock %}
